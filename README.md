# L4.2 task WBtech

# Distributed_CLI_tool (mygrep)

Распределённая реализация утилиты `grep` на Go с поддержкой кластерного режима и кворума.  
Проект тренирует работу со строками, файлами, параметрами командной строки, сетью и параллелизмом.

## Технологии
```
- Go 1.25
- Gin (для HTTP API между узлами)
- Стандартная библиотека Go
- Каналы и горутины для concurrency и обмена данными между узлами
- Структурированное логирование (интерфейс `logger.Logger`)
```

## Структура проекта
```
├── cmd/server/
│ └── main.go # точка входа
├── internal/
│ ├── app/ # запуск утилиты
│ ├── cluster/ # логика работы кластера
│ ├── logger/ # интерфейс и реализация логера
│ ├── model/ # основные структуры и конфиги
│ └── mygrep/ # реализация grep
├── data/
│ └── example.txt # тестовый файл
├── run_cluster.sh # скрипт запуска кластера на несколько узлов
├── README.md
├── TASK.md - ТЗ
└── mygrep - исполнительный файл
```
## Возможности
```
- Однопоточный режим (аналог обычного `grep`)
- Кластерный режим с несколькими узлами
- Настройка кворума (`-quorum`) для сбора результатов
- Параметры командной строки:
  - `-pattern` — шаблон поиска (обязательный)
  - `-i` — игнорировать регистр
  - `-n` — показывать номера строк
  - `-v` — инвертировать поиск
  - `-file` — путь к файлу (по умолчанию stdin)
  - `-cluster` — включить кластерный режим
  - `-quorum` — количество узлов для кворума (по умолчанию 1)
  - `-peers` — список адресов peer-узлов через запятую (например, `localhost:8082,localhost:8083`)
  - `-port` — порт локального узла
  ```

## Подготовка
1. Клонировать репозиторий:
```
git clone https://github.com/Vladimirmoscow84/Distributed_CLI_tool.git
cd Distributed_CLI_tool
```

2. Собрать исполняемый файл:
go build -o mygrep ./cmd/server

3. Создать папку для тестовых данных и положить туда файл example.txt (готовый пример есть в репозитории):
```
mkdir data
cp data/example.txt data/
```

## ЗАПУСК
### Однопоточный режим
./mygrep -pattern Spartak -file data/example.txt  (вместо Spartak введите свою строку для парсинга)

### Кластерный режим
```
Сделать скрипт run_cluster.sh исполняемым:
chmod +x run_cluster.sh
```

Запустить кластер из нескольких узлов (по умолчанию 3):
```
./run_cluster.sh
```

Скрипт запускает несколько узлов на портах 8081, 8082, 8083. Логи каждого узла отображаются в консоли.
Результат поиска будет собран с учётом кворума и выведен в консоль.

## Сравнение с оригинальным grep
```
grep -n "Spartak" data/example.txt
```


Автор
```
Разработчик: Vladimirmoscow84
Контакт: ccr1@yandex.ru
GitHub: github.com/Vladimirmoscow84
```
